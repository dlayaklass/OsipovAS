# Отчет по лабораторной работе №4
# Векторное программирование

**Дата:** 03-12-2025  
**Семестр:** 2 курс, 1 семестр  
**Группа:** ПИН-Б-О-24-2  
**Дисциплина:** Технологии программирования  
**Студент:** Осипов Александр Сергеевич

## Цель работы

Познакомиться с особенностями векторного программирования в R. Решить задания в соответствующем стиле программирования.

## Теоретическая часть

**Векторизация** - поэлементное одновременное выполнение действий над всеми элементами вектора или массива. R - векторный язык, где операции выполняются над целыми векторами одновременно.

**Основные объекты R:**
- Вектор - основной объект, содержит однотипные данные
- Лист (list) - может содержать разные по размеру и типу векторы
- Дата фрейм (data.frame) - таблица данных с одинаковыми по размеру векторами разных типов
- Матрица (matrix) - двумерная совокупность однотипных данных
- Массив (array) - многомерная совокупность данных

## Практическая часть

### Выполненные задачи

- [x] Задача 1: Предобработка данных - отбор наблюдений
- [x] Задача 2: Функция поиска отрицательных значений в dataframe

### Задание 1: Предобработка данных

#### Код программы

```r
# Создание вектора
my_vector <- c(21, 18, 21, 19, 25, 20, 17, 17, 18, 22, 17, 18, 18, 19, 19, 27, 21, 20, 24, 17, 15, 24, 24, 29, 19, 14, 21, 17, 19, 18, 18, 20, 21, 21, 19, 17, 21, 13, 17, 13, 23, 15, 23, 24, 16, 17, 25, 24, 22)

# Вычисление среднего значения
mean_value <- mean(my_vector)

# Вычисление стандартного отклонения
sd_value <- sd(my_vector)

# Отбор наблюдений, которые отклоняются от среднего меньше, чем на одно стандартное отклонение
my_vector2 <- my_vector[abs(my_vector - mean_value) < sd_value]
```

#### Результаты выполнения

```
Исходный вектор my_vector:
Количество элементов: 49
Среднее значение: 19.40816
Стандартное отклонение: 3.694913

Новый вектор my_vector2 (отклонение < 1 стандартное отклонение):
Количество элементов: 30
Элементы: 21 18 21 19 20 17 17 18 22 17 18 18 19 19 21 20 19 17 19 18 18 20 21 21 19 17 21 17 19 18
```

### Задание 2: Функция get_negative_values

#### Код программы

```r
get_negative_values <- function(df) {
  if (!is.data.frame(df)) {
    stop("Входные данные должны быть dataframe")
  }
  
  negative_list <- list()
  
  for (col_name in names(df)) {
    column <- df[[col_name]]
    negative_values <- column[!is.na(column) & column < 0]
    
    if (length(negative_values) > 0) {
      negative_list[[col_name]] <- negative_values
    }
  }
  
  if (length(negative_list) == 0) {
    return(NULL)
  }
  
  lengths <- sapply(negative_list, length)
  
  if (length(unique(lengths)) == 1 && length(negative_list) > 1) {
    return(as.matrix(as.data.frame(negative_list)))
  } else {
    return(negative_list)
  }
}
```

#### Результаты выполнения

```r
# Тест 1
test_data1 <- as.data.frame(list(
  V1 = c(-9.7, -10, -10.5, -7.8, -8.9),
  V2 = c(NA, -10.2, -10.1, -9.3, -12.2),
  V3 = c(NA, NA, -9.3, -10.9, -9.8)
))
get_negative_values(test_data1)
# $V1: -9.7 -10.0 -10.5 -7.8 -8.9
# $V2: -10.2 -10.1 -9.3 -12.2
# $V3: -9.3 -10.9 -9.8

# Тест 2
test_data2 <- as.data.frame(list(
  V1 = c(NA, -0.5, -0.7, -8),
  V2 = c(-0.3, NA, -2, -1.2),
  V3 = c(1, 2, 3, NA)
))
get_negative_values(test_data2)
#         V1   V2
# [1,] -0.5 -0.3
# [2,] -0.7 -2.0
# [3,] -8.0 -1.2
```

## Результаты выполнения

### Тестирование

- [x] Векторизованные операции работают корректно
- [x] Функция правильно обрабатывает dataframe с отрицательными значениями
- [x] Функция возвращает список или матрицу в зависимости от размеров

## Выводы

1. Векторизация значительно ускоряет вычисления в R
2. Векторные операции более читаемы и компактны, чем циклы
3. Функции семейства apply упрощают работу с данными
4. Правильная работа с типами данных важна для векторизации

## Ответы на контрольные вопросы

### 1. Векторизация

Векторизация - поэлементное одновременное выполнение действий над всеми элементами. Позволяет выполнять операции над целыми векторами одновременно, ускоряя вычисления.

### 2. Основные объекты языка R

- **Вектор** - основной объект, однотипные данные
- **Лист** - разнородные данные
- **Дата фрейм** - таблица данных
- **Матрица** - двумерный массив
- **Массив** - многомерный массив

### 3. Создание собственных функций

Используется конструкция `function_name <- function(arguments) { body; return(value) }`

### 4. Векторизованные функции семейства apply

- `apply()` - для матриц и массивов
- `lapply()` - для списков, возвращает список
- `sapply()` - упрощенная версия lapply
- `tapply()` - для группировки данных
- `mapply()` - для нескольких векторов

## Приложения

- Исходный код: `project/zadanie1.R`, `project/zadanie2.R`
- Задание: `task.md`

