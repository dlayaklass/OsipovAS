# Отчет по лабораторной работе 3
# Полиморфизм и Магические методы

**Дата:** 05-12-2025
**Семестр:** 2 курс, 1 семестр
**Группа:** ПИН-Б-О-24-2
**Дисциплина:** Технологии программирования
**Студент:** Осипов Александр Сергеевич

## Цель работы

Реализовать полиморфное поведение объектов различных классов сотрудников. Освоить перегрузку операторов и использование магических методов в Python для создания более интуитивного и удобного интерфейса работы с объектами.

## Теоретическая часть

**Полиморфизм** - это способность объектов разных классов обрабатываться через единый интерфейс. В Python полиморфизм реализуется через общие методы в базовых классах и их переопределение в дочерних классах.

**Магические методы** (dunder methods) - это специальные методы в Python, которые начинаются и заканчиваются двойным подчеркиванием (например, `__init__`, `__str__`, `__eq__`). Они позволяют переопределять поведение операторов и встроенных функций.

**Сериализация** - процесс преобразования объектов в формат, пригодный для хранения или передачи (например, JSON). **Десериализация** - обратный процесс восстановления объектов из формата.

## Практическая часть

### Выполненные задачи

- Задача 1: Создан класс `Department` с методами для работы с коллекцией сотрудников
- Задача 2: Реализованы магические методы для классов сотрудников (`__eq__`, `__lt__`, `__add__`, `__radd__`)
- Задача 3: Реализованы магические методы для класса `Department` (`__len__`, `__getitem__`, `__contains__`, `__iter__`)
- Задача 4: Реализован метод `__iter__` для класса `Developer` для итерации по стеку технологий
- Задача 5: Реализованы методы сериализации `to_dict()` и `from_dict()` для всех классов
- Задача 6: Реализованы методы `save_to_file()` и `load_from_file()` для класса `Department`
- Задача 7: Созданы функции-компараторы для сортировки сотрудников
- Задача 8: Создана демонстрационная программа

### Ключевые фрагменты кода

#### Магические методы для сравнения и операций

```python
def __eq__(self, other) -> bool:
    """Сравнение сотрудников по ID."""
    if not isinstance(other, AbstractEmployee):
        return False
    return self.__id == other.id

def __lt__(self, other) -> bool:
    """Сравнение по зарплате для сортировки."""
    if not isinstance(other, AbstractEmployee):
        return NotImplemented
    return self.calculate_salary() < other.calculate_salary()

def __add__(self, other) -> float:
    """Сложение возвращает сумму зарплат."""
    if not isinstance(other, AbstractEmployee):
        return NotImplemented
    return self.calculate_salary() + other.calculate_salary()
```

#### Магические методы для Department

```python
def __len__(self) -> int:
    """Возвращает количество сотрудников."""
    return len(self.__employees)

def __getitem__(self, key: int) -> AbstractEmployee:
    """Доступ к сотруднику по индексу: dept[0]"""
    return self.__employees[key]

def __contains__(self, employee: AbstractEmployee) -> bool:
    """Проверка принадлежности: employee in dept"""
    return employee in self.__employees

def __iter__(self):
    """Итератор по сотрудникам: for emp in dept"""
    return iter(self.__employees)
```

## Результаты выполнения

### Пример работы программы

```bash
================================================================================
Демонстрация работы системы учета сотрудников
Часть 3: Полиморфизм и Магические методы
================================================================================

1. Создание отдела и добавление сотрудников:
--------------------------------------------------------------------------------
Создан отдел: Отдел 'Разработка' (4 сотрудников)
Добавлено сотрудников: 4

2. Расчет общей зарплаты отдела (полиморфизм):
--------------------------------------------------------------------------------
Общая зарплата всех сотрудников отдела: 284500.00

3. Использование перегруженных операторов:
--------------------------------------------------------------------------------
manager == developer1: False
developer1 == developer1: True
developer1 < developer2: False
manager > salesperson: True
developer1 + developer2 = 167500.00
sum([manager, developer1, developer2, salesperson]) = 284500.00
manager in dept: True
dept[0]: Анна Петрова
dept[1]: Иван Сидоров

4. Итерация по отделу:
--------------------------------------------------------------------------------
1. Анна Петрова - 72000.00
2. Иван Сидоров - 100000.00
3. Мария Козлова - 67500.00
4. Петр Иванов - 45000.00

5. Итерация по стеку технологий разработчика:
--------------------------------------------------------------------------------
Технологии Иван Сидоров:
  - Python
  - SQL

8. Сортировка сотрудников:
--------------------------------------------------------------------------------
Сортировка по имени:
  Анна Петрова
  Иван Сидоров
  Мария Козлова
  Петр Иванов

Сортировка по зарплате (убывание):
  Иван Сидоров: 100000.00
  Анна Петрова: 72000.00
  Мария Козлова: 67500.00
  Петр Иванов: 45000.00

9. Сериализация и десериализация:
--------------------------------------------------------------------------------
Отдел сохранен в файл: department_data.json
Отдел загружен из файла: Отдел 'Разработка' (4 сотрудников)
  Количество сотрудников: 4
```

### Тестирование

- Модульные тесты пройдены - все магические методы работают корректно
- Интеграционные тесты пройдены - полиморфизм и сериализация работают
- Производительность соответствует требованиям

## Выводы

1. **Полиморфизм успешно реализован** - метод `calculate_total_salary()` работает с объектами разных типов через общий интерфейс `AbstractEmployee`.

2. **Магические методы делают код интуитивным** - использование операторов (`==`, `<`, `+`, `in`, `[]`) делает работу с объектами более естественной и читаемой.

3. **Сериализация позволяет сохранять состояние** - возможность сохранять и загружать данные из JSON файлов обеспечивает персистентность данных.

4. **Итерация упрощает работу с коллекциями** - реализация `__iter__` позволяет использовать стандартные конструкции Python для работы с объектами.

## Ответы на контрольные вопросы

1. **Что такое полиморфизм?** - Полиморфизм - это способность объектов разных классов обрабатываться через единый интерфейс, что позволяет писать более универсальный и гибкий код.

2. **Что такое магические методы?** - Магические методы - это специальные методы в Python, которые позволяют переопределять поведение операторов и встроенных функций, делая работу с объектами более интуитивной.

3. **В чем разница между `__add__` и `__radd__`?** - `__add__` вызывается при операции `a + b`, когда `a` - это объект нашего класса. `__radd__` вызывается при операции `b + a`, когда `b` не является объектом нашего класса (например, при `sum([obj1, obj2])`).

4. **Зачем нужна сериализация?** - Сериализация позволяет сохранять состояние объектов в файлы или передавать их по сети, что необходимо для персистентности данных и распределенных систем.

5. **Как работает полиморфизм в Python?** - В Python полиморфизм реализуется через утиную типизацию (duck typing) - если объект имеет нужный метод, он может быть использован независимо от его типа. Также используется наследование и переопределение методов.

## Приложения

- [Исходный код: `project/`](project/)
- [Задание: `task.md`](task.md)

